# Firebase App Hosting configuration
# Documentation: https://firebase.google.com/docs/app-hosting

runConfig:
  # Runtime environment
  runtime: nodejs20
  
  # Environment variables (public - available to client-side code)
  env:
    - variable: NEXT_PUBLIC_FIREBASE_API_KEY
      value: AIzaSyC3762Bk_ORisX7lORyBJ_-HHDvM-qI_24
    - variable: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
      value: cfg-event-regportal.firebaseapp.com
    - variable: NEXT_PUBLIC_FIREBASE_PROJECT_ID
      value: cfg-event-regportal
    - variable: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
      value: cfg-event-regportal.firebasestorage.app
    - variable: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
      value: "886647028603"
    - variable: NEXT_PUBLIC_FIREBASE_APP_ID
      value: 1:886647028603:web:ecf0c207bbf3e0b27c1bde
    - variable: NEXT_PUBLIC_APP_URL
      availability:
        - BUILD
        - RUNTIME
      value: https://cfg-event-regportal.web.app
  
  # Secret environment variables (server-side only - stored in Google Secret Manager)
  # Create these secrets in Google Secret Manager first:
  # gcloud secrets create FIREBASE_PROJECT_ID --data-file=-
  # gcloud secrets create FIREBASE_CLIENT_EMAIL --data-file=-
  # gcloud secrets create FIREBASE_PRIVATE_KEY --data-file=-
  # gcloud secrets create ZEPTOMAIL_API_KEY --data-file=-
  # gcloud secrets create ZEPTOMAIL_FROM_EMAIL --data-file=-
  # gcloud secrets create ZEPTOMAIL_FROM_NAME --data-file=-
  
  secrets:
    - variable: FIREBASE_PROJECT_ID
      secret: FIREBASE_PROJECT_ID
      projectId: cfg-event-regportal
    - variable: FIREBASE_CLIENT_EMAIL
      secret: FIREBASE_CLIENT_EMAIL
      projectId: cfg-event-regportal
    - variable: FIREBASE_PRIVATE_KEY
      secret: FIREBASE_PRIVATE_KEY
      projectId: cfg-event-regportal
    - variable: ZEPTOMAIL_API_KEY
      secret: ZEPTOMAIL_API_KEY
      projectId: cfg-event-regportal
    - variable: ZEPTOMAIL_FROM_EMAIL
      secret: ZEPTOMAIL_FROM_EMAIL
      projectId: cfg-event-regportal
    - variable: ZEPTOMAIL_FROM_NAME
      secret: ZEPTOMAIL_FROM_NAME
      projectId: cfg-event-regportal

# Cloud Build configuration
buildConfig:
  runtime: nodejs20
  buildCommand: npm run build
  installCommand: npm ci
